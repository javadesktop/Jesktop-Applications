<?xml version="1.0"?>

<!DOCTYPE document SYSTEM "./dtd/document-v10.dtd">

<document>
  <header>
    <title>Jesktop Documentation</title>
    <subtitle>Our Perforce source depot</subtitle>
    <authors>
      <person id="WB" name="William Beebe" email="whbeebe@earthlink.net"/>
      <person id="PH" name="Paul Hammant" email="Paul_Hammant@yahoo.com"/>
    </authors>
    <notice>
      Jesktop documentation is under construction.  Everything you
      can find outside this page is to be considered obsolete.
    </notice>
  </header>
  <body>
    <s1 title="Overview">
      <p>
	Perforce is a commercial Source control package. It's free for open source use, and some people (a few of us included) think it's much better than alternatives.  The source depot is actually hosted by Perforce (the company) too, but none of us are employed by Perforce or receive any reward for it's use or recommendation.
      </p>
    </s1>
    <s1 title="A word about Ant">
      <p>
	Jesktop uses Ant for a platform neutral building.  What doesn't nowadays?  It wants to use it's own ant, not the one you may have installed.  <strong>As such it needs two things from you before starting:</strong>
      </p>	
      <ol>
        <li>
          Environmental variable JAVA_HOME set to the correct directory.  Sun describe this in their Java installation procedures.
        </li>
        <li>
          Environmental variable PATH to have JAVA_HOME/bin as one of it's colon or semi colon separated entries.
        </li>
      </ol>      	
    </s1>    
    <s1 title="Installation of software - Windows GUI">
      <p>
	Update rights to the depot is by user-id/password. Guest access is via the <strong>guest</strong> user id and no password (not blank).
      </p>
    <ol>
      <li>
	Install the perforce client.  If you plan on using it also on your own machine for private development, you can choose client &amp; server, and get the client to switch as your working project dictates.<br/>
        <link href="http://www.perforce.com/perforce/loadprog.html">http://www.perforce.com/perforce/loadprog.html</link>
      </li>
      <li>
        Go into settings and specify oss.perforce.co.uk:1666 as the server.
      </li>
      <li>
        In perforce client, choose "User->New" &amp; type your_name (or guest) and press enter.
      </li>
      <li>
        Choose "User->view users"
      </li>
      <li>
        Choose "User-> switch to" (after clicking on yourself or guest).
      </li>
      <li>
        If not guest, choose "User-> Set password".  Enter your old, advised, password and choose a new one.
      </li>
      <li>
	Choose "ClientSpec->Edit &lt;your computer name>", fill in appropriate location for root ( most of us do c:\oss_perforce_co_uk)
      </li>
      <li>
        Right click on //depot, choose "Sync-> to head revision" (could take a while*).  Rest assured that subsequent repeats of this will be very fast.  So fast in fact you'll often doubt that it has done anything.  Batik is the big submission, it's mega bytes in it's own right.
      </li>
    </ol>
    </s1>
    <s1 title="Installation of software - Linux command line client">
      <p>
	Update rights to the depot is by user-id/password. Guest access is via the <strong>guest</strong> user id and no password (not blank).
      </p>
      <ol>
        <li>
          Download "p4" from <link href="http://www.perforce.com/perforce/loadprog.html">  http://www.perforce.com/perforce/loadprog.html</link>
        </li>
        <li>
          export P4PORT=oss.perforce.co.uk
        </li>
        <li>
          export P4USER=guest
        </li>
        <li>
          type "p4 client" which will put you in vi (etc).  Overtype the root to somewhere sensible like /home/jesktop-  depot/ and save/exit.
        </li>
        <li>
          type "p4 sync" to initate the speedy retrieval of 40Mb of source / libraries etc.
        </li>
        <li>
          Alternatively do "p4 sync  //depot/projects/AvalonCommon/..." followed by "p4 sync  //depot/projects/Jesktop/Jesktop/..." for a minimal retrieval of source &amp; tools.
        </li>
        <li>
          In both cases run build in AvalonCommon before build anywhere else.
        </li>
      </ol>
    </s1>    
    <s1 title="Browsing the Source depot without installing software">    
      <p>
      	Point your browser to <link href="http://oss.perforce.co.uk">http://oss.perforce.co.uk</link>.  This is a web browsable form of the entire perforce hosted source tree.  projects/AvalonCommon and projects/Jesktop pertain to this project.  projects/ftpserver pertains to Rana's FTP server project.  The site seems to be a bit intermittent at the moment.
      </p>
    </s1>
    <s1 title="Typical usage scenarios for perforce for the Jesktop project">
      <ul>
        <li>
          <strong>Synchronization:</strong> Right click on //depot, choose "Sync-> to head revision".
        </li>
        <li>
          <strong>Addition of new files:</strong> From the menu, choose "Changelist-> view pending". In Explorer drag the files or directories you want to add to the depot and drop them on the pending changelist pane.  You can also do something similar using Perforce's own menus (File-> Add to Source control).
        </li>
        <li>
          <strong>Editing a file:</strong> Navigate to the file in the perforce directory tree and choose "Open for Edit" - a right mouse button menu operation.
        </li>
        <li>
          <strong>Deleting files:</strong> Same as edit, but choose "Open for delete".  It will immediately go from your file system, and this change will be cascaded to other developer's file systems after you do a submit of change and they do a sync.
        </li>
        <li>
          <strong>Submitting a Change:</strong> In the pending changelists view, you can right click and choose "Submit", add a comment that is pertinent and fire the change off.
        </li>
      </ul>
    </s1>
    <s1 title="Perforce per se">
      <p>
        Don't be afraid to ask us "how-do-I" in respect of Perforce in the mail-list, We are more than willing to help if needs be.  There are a few negative features of the GUI and in fact installation per se, but once you get over that hump, you'll never turn back :-))  I can't stress that enough it's worth the pain - everyone says so.
      </p>
      <p>
        For additional help on perforce see their own pages : <link href="http://www.perforce.com/perforce/doc.001/manuals/boilerplates/quickstart.html#docs">http://www.perforce.com/perforce/doc.001/manuals/boilerplates/quickstart.html#docs</link>. Though to be honest, there is more there than you need - especially server stuff, when all you need is client instructions.
      </p>
    </s1>
   </body>
  <footer>
    <legal>
      Copyright (c) @year@ The Jesktop Project All rights reserved.
    </legal>
  </footer>
</document>
